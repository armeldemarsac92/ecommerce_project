image: docker:24.0.7

services:
  - name: docker:24.0.7-dind
    alias: docker

variables:
  # Docker configuration without TLS
  DOCKER_HOST: tcp://docker:2375
  DOCKER_TLS_CERTDIR: ""  # Disable TLS
  # DOCKER_DRIVER: overlay2
  FF_NETWORK_PER_BUILD: "true"
  # DOCKER_BUILDKIT: "1"
  # BUILDKIT_PROGRESS: "plain"

stages:
  - build

build:
  stage: build
  script:
    # Wait for Docker to be ready
    - sleep 5
    - docker info
    # Build the Docker image
    - docker -v
    - docker build -t t-dev-702-api:latest .
    # List Docker images to verify the build
    - docker images